<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/carbon-route/carbon-location.html">
<link rel="import" href="../../bower_components/carbon-route/carbon-route.html">
<link rel="import" href="../../bower_components/app-layout/app-layout.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">

<dom-module id="auth-app">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <carbon-location route="{{route}}" use-hash-as-path></carbon-location>
    <carbon-route
        route="{{route}}"
        pattern="/:page"
        data="{{pageData}}"
        tail="{{subRoute}}"></carbon-route>
    <carbon-route
        route="{{subRoute}}"
        pattern="/:id"
        data="{{idData}}"></carbon-route>

    <app-drawer-layout responsive-width="">
    <app-drawer id="drawer" swipe-open>
      <app-header-layout has-scrolling-region>
        <template is="dom-if" if="{{user}}">
          <app-header fixed >
            <div class="avatar-container">
              <div class="image"></div>
            </div>
            <div class="contact-info">
              <div class="name">[[user.username]]</div>
              <div class="email">[[user.email]]</div>
            </div>
          </app-header>
        </template>

        <!-- nav menu -->
          <paper-listbox
              selected="{{pageData.page}}"
              attr-for-selected="name"
              on-iron-activate="drawerSelected">
            <paper-item name="home">Home</paper-item>
            <paper-item name="favorites">Favorites</paper-item>
            <paper-item name="saved">Saved</paper-item>
            <paper-item name="trending">Trending</paper-item>
          </paper-listbox>

      </app-header-layout>
    </app-drawer>
  </app-drawer-layout>
  </template>
  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'auth-app',

        properties: {
          user: {
            type: Object,
            notify: true
          }
        },

        attached: function() {
          this.async(function() {
            console.log('attached');
            this.user = {
              "username": "Peter",
              "email": "email@example.com"
            }
          });
        }
      });
    })();
  </script>

</dom-module>
