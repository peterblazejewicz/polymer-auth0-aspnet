<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/carbon-route/carbon-location.html">
<link rel="import" href="../../bower_components/carbon-route/carbon-route.html">
<link rel="import" href="../../bower_components/app-layout/app-layout.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../contact-card/contact-card.html">

<dom-module id="auth-app">
  <template>
    <style>
      :host {
        display: block;
      }
      .login-actions {
        @apply(--layout-horizontal);
        @apply(--layout-end-justified);
        padding: 0.5em 14px;
      }
      .login-actions paper-button {
        @apply(--layout-self-end);
        border: 1px solid var(--paper-button-ink-color);
      }

      app-toolbar h1 {
        font-size: var(--app-toolbar-font-size, 20px);
        font-weight: normal;
      }
    </style>

    <carbon-location route="{{route}}" use-hash-as-path></carbon-location>
    <carbon-route
        route="{{route}}"
        pattern="/:page"
        data="{{pageData}}"
        tail="{{subRoute}}"></carbon-route>
    <carbon-route
        route="{{subRoute}}"
        pattern="/:id"
        data="{{idData}}"></carbon-route>

    <app-scrollpos-control
      selected="[[pageData.page]]"
      reset="[[isDetailPage(pageData.page)]]"></app-scrollpos-control>
    <app-drawer-layout responsive-width="1280px" drawer-width="250px">
      <app-drawer id="drawer" swipe-open>
        <app-header-layout has-scrolling-region>
          <div class="login-actions">
            <template is="dom-if" if="{{!user}}">
              <paper-button noink>Login</paper-button>
            </template>
            <template is="dom-if" if="{{user}}">
              <paper-button noink>Logout</paper-button>
            </template>
          </div>
          <template is="dom-if" if="{{user}}">
            <contact-card user="{{user}}">
            </contact-card>
          </template>
          <!-- nav menu -->
          <paper-listbox selected="{{pageData.page}}" attr-for-selected="name" on-iron-activate="drawerSelected">
            <paper-item name="home">Home</paper-item>
            <paper-item name="favorites">Favorites</paper-item>
            <paper-item name="saved">Saved</paper-item>
            <paper-item name="trending">Trending</paper-item>
          </paper-listbox>
        </app-header-layout>
      </app-drawer>
      <!-- main panel -->
      <app-header-layout>
        <app-header fixed effects="waterfall">
          <app-toolbar class="title-toolbar main-title-toolbar">
            <paper-icon-button drawer-toggle icon="menu" alt="Toggle menu" noink></paper-icon-button>
            <h1 class="title">App Title</h1>
          </app-toolbar>
        </app-header>
      </app-header-layout>
    </app-drawer-layout>
  </template>
  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'auth-app',

        properties: {
          user: {
            type: Object,
            notify: true
          }
        },

        attached: function() {
          this.async(function() {
            console.log('attached');
            this.user = {
              "name": "Peter Grzegorz Blazejewicz",
              "email": "email@example.com"
            }
          });
        }
      });
    })();
  </script>
</dom-module>
